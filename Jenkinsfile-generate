#!groovy

node {

  stage('Checkout') {
    echo "Checking out branch ${env.BRANCH}"
    git branch: '${BRANCH}'
  }

  stage('Generate Plugin Data') {
    withEnv(["PATH+MAVEN=${tool 'M3'}/bin"]) {
      sh "mvn -P generatePluginData"
    }
  }

  stage('Verify Plugin Data') {
    withEnv(["PATH+MAVEN=${tool 'M3'}/bin"]) {
      sh "mvn -P verifyPluginData"
    }
  }

}
